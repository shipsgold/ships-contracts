
// Code generated by zane generator DO NOT EDIT.
import { RequestManager, PostMessageWindowTransport, PostMessageIframeTransport, WebSocketTransport, HTTPTransport, Client, JSONRPCError } from "@open-rpc/client-js";
import _ from "lodash";
import { OpenrpcDocument as OpenRPC, MethodObject, ContentDescriptorObject } from "@open-rpc/meta-schema";
import { MethodCallValidator, MethodNotFoundError } from "@open-rpc/schema-utils-js";
import { Account, Near, Contract} from "near-api-js";
import BN from "bn.js"

export type OwnerId = string;
export type Count = number;
export type NumberHo1ClIqD = number;
export type NullQu0Arl1F = null;
/**
 *
 * Generated! Represents an alias to any of the provided schemas
 *
 */
export type AnyOfOwnerIdCountNumberHo1ClIqDNumberHo1ClIqDNullQu0Arl1F = OwnerId | Count | NumberHo1ClIqD | NullQu0Arl1F;
export type Increment = () => Promise<NumberHo1ClIqD>;
export type GetCount = () => Promise<NumberHo1ClIqD>;
export type New = (owner_id: OwnerId, count: Count) => Promise<NullQu0Arl1F>;

  /**
   * Generated typings 
   */
  // tslint:disable-next-line:max-line-length
  type GTIncrement = [...Parameters<Increment>, ChangeMethodOptions?]
  type RTIncrement = ReturnType<Increment>

  /**
   * Generated typings 
   */
  // tslint:disable-next-line:max-line-length
  type GTGetCount = [...Parameters<GetCount>, ChangeMethodOptions?]
  type RTGetCount = ReturnType<GetCount>

  /**
   * Generated typings 
   */
  // tslint:disable-next-line:max-line-length
  type GTNew = [...Parameters<New>, ChangeMethodOptions?]
  type RTNew = ReturnType<New>


export interface Options {
    account: Account;
    contractId: string;
}

export type NearNumber = BN | string | number;

export interface ChangeMethodOptions {
  gas?: NearNumber 
  amount?: NearNumber
}

const isMetaObject = (x: any): boolean => {
  if(x && (x.gas || x.amount)) return true
  return false
}

export class TestContractApi {
  public static openrpcDocument: OpenRPC = {"openrpc":"1.2.4","info":{"version":"0.0.1","description":"Test API","title":"TestContractApi"},"methods":[{"name":"increment","params":[],"tags":[{"name":"change","description":"change method"}],"result":{"name":"count","schema":{"type":"number","title":"number_Ho1clIqD"}}},{"name":"get_count","params":[],"tags":[{"name":"view","description":"view method"}],"result":{"name":"countResult","schema":{"type":"number","title":"number_Ho1clIqD"}}},{"result":{"name":"InitResult","required":false,"schema":{"type":"null","title":"null_Qu0Arl1F"}},"name":"new","description":"initialization method","tags":[{"name":"change","description":"change method"}],"params":[{"name":"owner_id","required":true,"schema":{"title":"owner_id","type":"string"}},{"name":"count","required":true,"schema":{"title":"count","type":"number"}}]}],"components":{"tags":{"change":{"name":"change","description":"change method"},"view":{"name":"view","description":"view method"}},"contentDescriptors":{},"schemas":{}}} ;
  public contract: Contract;
  private validator: MethodCallValidator;

  constructor(options: Options) {
    const {account, contractId} = options;
    this.validator = new MethodCallValidator(TestContractApi.openrpcDocument);
    const changeMethods:string[] = [
      "increment",
      "new",
    ] 

    const viewMethods:string[] = [
      "get_count",
    ]
    this.contract = new Contract(account,contractId, {changeMethods, viewMethods})
  }

  
  /**
   * 
   */
  // tslint:disable-next-line:max-line-length
  public increment(...params: GTIncrement): RTIncrement {
    //return this.request("increment", params);
    if(isMetaObject(params.slice(1))){
    let metaData = params.pop() as ChangeMethodOptions;
    const paramNames:string[] = [ 
    ]

    const paramByName = _.zipObject(paramNames, params);
    return (this.contract as any).increment({args: paramByName, ...metaData}) as RTIncrement 
    }
    const paramNames:string[] = [ 
    ]
    const paramByName = _.zipObject(paramNames, params);
    return (this.contract as any).increment({args: paramByName}) as RTIncrement 
  }
  
  /**
   * 
   */
  // tslint:disable-next-line:max-line-length
  public get_count(...params: GTGetCount): RTGetCount {
    //return this.request("get_count", params);
    if(isMetaObject(params.slice(1))){
    let metaData = params.pop() as ChangeMethodOptions;
    const paramNames:string[] = [ 
    ]

    const paramByName = _.zipObject(paramNames, params);
    return (this.contract as any).get_count({args: paramByName, ...metaData}) as RTGetCount 
    }
    const paramNames:string[] = [ 
    ]
    const paramByName = _.zipObject(paramNames, params);
    return (this.contract as any).get_count({args: paramByName}) as RTGetCount 
  }
  
  /**
   * 
   */
  // tslint:disable-next-line:max-line-length
  public new(...params: GTNew): RTNew {
    //return this.request("new", params);
    if(isMetaObject(params.slice(1))){
    let metaData = params.pop() as ChangeMethodOptions;
    const paramNames:string[] = [  
      "owner_id", 
      "count",
    ]

    const paramByName = _.zipObject(paramNames, params);
    return (this.contract as any).new({args: paramByName, ...metaData}) as RTNew 
    }
    const paramNames:string[] = [  
      "owner_id", 
      "count",
    ]
    const paramByName = _.zipObject(paramNames, params);
    return (this.contract as any).new({args: paramByName}) as RTNew 
  }
  
}
export default TestContractApi;
